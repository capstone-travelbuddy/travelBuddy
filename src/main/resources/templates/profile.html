<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/header :: profile-header">
    <meta charset="UTF-8">
    <title id="pageTitle">Profile Page</title>
</head>
<body id="profile-page">
<nav th:insert="fragments/navbar"></nav>
<div class="container-fluid text-center" style="min-height: 100vh;margin-top: 20px;">
    <div class="h1 text-center" style="margin-bottom: 20px;" th:text="${add}"></div>
    <div class="profile-container">
        <div class="profile-container" style="margin-left: 15px; margin-right: 15px">
            <div class="profile main-body m-3">
                <div class="row gutters-sm">
                    <div class="col-md-4 mb-3">
                        <div class="profile card">
                            <div class="profile card-body">
                                <div id="profileImg" class="d-flex flex-column align-items-center text-center">
                                    <img th:src="@{'data:image/jpeg;base64,'+${user.getUserImage().generateBase64Image()}}"
                                         alt="User Profile" class="rounded-circle" width="150">
                                    <div class="mt-3">
                                        <h4 style="text-align: center; height: fit-content; font-size: 20px; font-weight: bold">
                                            <span th:text="${user.username}"></span></h4>
                                        <p class="text-muted font-size-sm"
                                           style="text-align: center; height: fit-content; font-size: 20px; font-weight: bold">
                                            [[${user.getCity().name}]], TX</p>
                                        <a th:href="@{/profile/upload}">
                                            <button type="submit" class="btn-primary btn-lg">Edit Profile Picture
                                            </button>
                                        </a>
                                        <br>
                                        <br>
                                        <a th:href="@{/shop/recommend}">
                                            <button type="submit" class="btn-primary btn-lg">Add Local Recommendation
                                            </button>
                                        </a>
                                        <div class="row mt-3">
                                            <h6 class="mb-0"
                                                style="text-align: center; height: fit-content; font-size: 20px; font-weight: bold">
                                                Username</h6>
                                            <div class="text-secondary"
                                                 style="text-align: center; height: fit-content; font-size: 15px; font-weight: bold">
                                                <span th:text="${user.username}"></span>
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="row mt-3">
                                            <h6 class="mb-0"
                                                style="text-align: center; height: fit-content; font-size: 20px; font-weight: bold">
                                                Email</h6>
                                            <div class="text-secondary"
                                                 style="text-align: center; height: fit-content; font-size: 15px; font-weight: bold">
                                                <span th:text="${user.email}"></span>
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="row">
                                            <form class="col" style="width: 100px" th:action="@{/profile/edit/}"
                                                  method="get">
                                                <button class="btn-primary btn-lg">Edit Profile</button>
                                            </form>
                                            <form class="col text-wrap" style="width: 100px"
                                                  th:action="@{/profile/delete}" method="get">
                                                <button class="btn-danger btn-lg">Delete Profile</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--					<div class="card mt-5">-->
                        <!--						<ul class="list-group list-group-flush" style="border-radius: 15px">-->
                        <!--							<li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">-->
                        <!--								<h6 class="mb-0"  style="text-align: center; height: fit-content; font-size: 20px; font-weight: bold">Want to Visit:</h6>-->
                        <!--							</li>-->
                        <!--							<li class="list-group-item d-flex justify-content-between align-items-center flex-wrap"-->
                        <!--								th:each="toVisit : ${user.getShopsToVisit()}">-->
                        <!--								<a class="mb-0 h6" style="text-align: center; height: fit-content; font-size: 15px; font-weight: bold" th:href="'/shop/' + ${toVisit.id}" th:text="${toVisit.name}"></a>-->
                        <!--								<form th:action="'profile/toVisit/shop/' + ${toVisit.id}" method="get">-->
                        <!--									<button class="btn"><i class="fa fa-trash"></i></button>-->
                        <!--								</form>-->
                        <!--							</li>-->
                        <!--						</ul>-->
                        <!--					</div>-->
                    </div>

                    <div class="col-md-8 h-100">
                        <div class="row gutters-sm">
                            <div class="col-sm-4 mb-3">
                                <div class="card margin-auto"
                                     style="overflow: auto; background-color: darkcyan; height: 500px; border: darkcyan">
                                    <div class="card h-100">
                                        <div class="profile card-body m-3">
                                            <ul class="list-group list-group-flush" style="border-radius: 15px">
                                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                    <h6 class="mb-0"
                                                        style="text-align: center; height: fit-content; font-size: 20px; font-weight: bold; margin-left: 5px">
                                                        Want to Visit:</h6>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap"
                                                    th:each="toVisit : ${user.getShopsToVisit()}">

                                                    <form th:action="'profile/toVisit/shop/' + ${toVisit.id}"
                                                          method="get" class="d-flex">
                                                        <a class="mb-0 h6"
                                                           style="text-align: center; height: fit-content; font-size: 15px; font-weight: bold"
                                                           th:href="'/shop/' + ${toVisit.id}"
                                                           th:text="${toVisit.name}"></a>
                                                        <button class="btn float-end"><i class="fa fa-trash"
                                                                               style="font-size: large;"></i>
                                                        </button>
                                                    </form>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <!--						</div>-->


                                    <!--						<div class="col-sm-6 mb-3">-->
                                    <div class="card h-100">
                                        <div class="profile card-body m-3">
                                            <h5 class="d-flex align-items-center mb-3"
                                                style="text-align: center; height: fit-content; font-size: 20px; font-weight: bold; margin-left: 5px">
                                                [[${user.username}]]'s Favorites:</h5>
                                            <div th:each="shop : ${user.getLikedShops()}">
                                                <div class="card-text"
                                                     style="height: fit-content; font-size: 15px; font-weight: bold">
                                                    <a th:href="'/shop/' + ${shop.id}" th:text="${shop.name}"></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="col-sm-8 mb-3 h-100">
                                <div class="card margin-auto" style="overflow: auto; height: 500px">
                                    <div class="profile card-body m-3">
                                        <h5 class="d-flex text-center mb-3 align-items-center flex-wrap"
                                            style="height: fit-content;  font-size: 20px; font-weight: bold; margin-left: 75px">
                                            [[${user.username}]]'s Reviews and Ratings:</h5>
                                    </div>
                                    <div class="m-3" style="margin-top: 20px;" th:each="review : ${user.getReviews()}">
                                        <div class="float-right" style="margin-top: -10px;">
                                            <p th:if="${review.getRating() == 1}"><img class="Stars"
                                                                                       th:src="@{/img/star.png}"></p>
                                            <p th:if="${review.getRating() == 2}"><img class="Stars"
                                                                                       th:src="@{/img/star.png}"><img
                                                    class="Stars" th:src="@{/img/star.png}"></p>
                                            <p th:if="${review.getRating() == 3}"><img class="Stars"
                                                                                       th:src="@{/img/star.png}"><img
                                                    class="Stars" th:src="@{/img/star.png}"><img class="Stars"
                                                                                                 th:src="@{/img/star.png}">
                                            </p>
                                            <p th:if="${review.getRating() == 4}"><img class="Stars"
                                                                                       th:src="@{/img/star.png}"><img
                                                    class="Stars" th:src="@{/img/star.png}"><img class="Stars"
                                                                                                 th:src="@{/img/star.png}"><img
                                                    class="Stars" th:src="@{/img/star.png}"></p>
                                            <p th:if="${review.getRating() == 5}"><img class="Stars"
                                                                                       th:src="@{/img/star.png}"><img
                                                    class="Stars" th:src="@{/img/star.png}"><img class="Stars"
                                                                                                 th:src="@{/img/star.png}"><img
                                                    class="Stars" th:src="@{/img/star.png}"><img class="Stars" ,
                                                                                                 th:src="@{/img/star.png}">
                                            </p>
                                        </div>
                                        <a class="m-3 w-95" th:href="'/shop/' + ${review.shop.id}"
                                           th:text="${review.shop.name}"
                                           style="text-align: center; height: fit-content; font-size: 15px; font-weight: bold"></a>
                                        <div class="card-text m-3 w-95"
                                             style="height: fit-content; font-size: 15px; font-weight: bold"
                                             th:text="${review.description}"></div>
                                        <div class="btn-toolbar mt-3 mb-3 w-100">
                                            <form class="col" th:action="'/review/edit/' + ${review.id}" method="get">
                                                <button class="btn-primary btn-lg float-start">Edit</button>
                                            </form>
                                            <form class="col" th:action="'/review/delete/' + ${review.id}"
                                                  method="post">
                                                <button class="btn-danger btn-lg float-end">Delete</button>
                                            </form>
                                        </div>
                                        <hr>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
</div>
<footer th:insert="fragments/footer"></footer>

</body>
</html>